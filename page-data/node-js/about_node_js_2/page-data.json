{"componentChunkName":"component---src-template-post-tsx","path":"/node-js/about_node_js_2/","result":{"data":{"site":{"siteMetadata":{"comment":{"utterances":"akasai/akasai.github.io"}}},"post":{"id":"7e97ab3d-3da9-5b1f-baf9-d59388617512","excerpt":"자바스크립트 V8엔진과 Node.js 런타임을 기반으로 비동기처리가 어떻게 처리되는지 이벤트 루프의 동작방식등을 정리한다. 이벤트 루프 이벤트 루프는 콜 스택과 큐를 감시하며 비어있는 콜 스택에 작업을 넣는 작업(Tick…","timeToRead":5,"html":"<p>자바스크립트 V8엔진과 Node.js 런타임을 기반으로 비동기처리가 어떻게 처리되는지</p>\n<p>이벤트 루프의 동작방식등을 정리한다.</p>\n<hr>\n<h2 id=\"이벤트-루프\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EB%A3%A8%ED%94%84\" aria-label=\"이벤트 루프 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이벤트 루프</h2>\n<p>이벤트 루프는 콜 스택과 큐를 감시하며 비어있는 콜 스택에 작업을 넣는 작업(Tick)을 수행한다.</p>\n<p>MDN의 이벤트 루프의 간이 코드를 통해 <code class=\"language-text\">Tick</code>의 대략적인 동작원리가 설명된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>queue<span class=\"token punctuation\">.</span><span class=\"token function\">waitForMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    queue<span class=\"token punctuation\">.</span><span class=\"token function\">processNextMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">Queue.waitForMessage()</code>를 통해 작업이 도착할 때까지 <strong>동기적으로</strong> 기다린다.</p>\n<span class=\"callout\">\n동시에 발생하는 다양항 작업들을 큐에 쌓고 이벤트 루프를 통해 실행하므로써 동시성을 확보하는 것이다.<br>\n실제로 작업이 동시에 수행되는 것은 아니다.\n</span>\n<p>콜 스택에 올라간 작업은 되므로 <code class=\"language-text\">Run-to-completion</code> 으로 동작한다.</p>\n<h3 id=\"구조\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%EC%A1%B0\" aria-label=\"구조 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>구조</h3>\n<blockquote>\n<p>The event loop is what allows Node.js to perform non-blocking I/O operations — despite the fact that JavaScript is single-threaded — by offloading operations to the system kernel whenever possible.\nSince most modern kernels are multi-threaded, they can handle multiple operations executing in the background. When one of these operations completes, the kernel tells Node.js so that the appropriate callback may be added to the poll queue to eventually be executed. We’ll explain this in further detail later in this topic.</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 966px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAABd0lEQVQ4y42T6Y6CQBCEeQYPQLxAEUE8CRITff/XavNV0obdrBt+VIbp6amuqW6C6XRqi8XCsiyz9XotpGlqm81G6MeWy6WRH4bhVwQkHY9HJc/ncwHy+/1up9NJxYglSaICURT9SxqsVislHg4H2+/3ttvthPP5bFVV6Zt4Xde23W6HKczzXCq48Hg8rGkakbVta13XiTCO42EKISQRUldSlqVsYIWYOOdYMUihm49PXIaI9Xq9ygp8BDTGFU4mE2E8Hgu+FyFPxSsU0Aj8QyFP5ptzB5dms5lyAbH+NPx4Mocksb9cLtqjysnIcS9pJsXx/Pl8fsg/TYHdR6QoCrvdbrpEzEcKKyDDDuKv10tNgxRrKK6xgd0VsvbHqK+OC6PRSOTk0DCAAM/7KGTFG8BFHxf2/cHmyTSFlQYBvn0vQhSiyEeEivjj1Xnq78Fm/Qt6MskQowLvvNN0mV+QgigdNNgcuo80hue7n4wSCjnDBs5d3TfCN19Vf1BE/hCTAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"loop\"\n        title=\"loop\"\n        src=\"/static/772b5ca5cf504ed2445c0d47a7e0dfb6/5bf79/loop.png\"\n        srcset=\"/static/772b5ca5cf504ed2445c0d47a7e0dfb6/5a46d/loop.png 300w,\n/static/772b5ca5cf504ed2445c0d47a7e0dfb6/0a47e/loop.png 600w,\n/static/772b5ca5cf504ed2445c0d47a7e0dfb6/5bf79/loop.png 966w\"\n        sizes=\"(max-width: 966px) 100vw, 966px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위 Node.js공식문서의 설명처럼 <strong>이벤트 루프</strong>는 시스템 커널에 작업을 넘기므로써 싱글스레드임에도 논블로킹 I/O 작업을 수행한다.\n대부분의 현대 커널은 멀티스레드이므로 넘겨받은 다수의 작업을 수행가능하며, 작업이 완료되면 Node.js로 다시 알려주어 콜백을 poll queue에 추가할 수 있도록 한다.</p>\n<p>위 구조를 살펴보면</p>\n<ol>\n<li>\n<p>Timers</p>\n<p><code class=\"language-text\">setTimeout()</code>과 <code class=\"language-text\">setInterval()</code>로 스케줄링한 콜백을 실행</p>\n</li>\n<li>\n<p>Pending callbacks</p>\n<p><strong>close callback</strong>, <strong>Timer로 스케줄링된 콜백</strong>, <code class=\"language-text\">setImmediate()</code>를 제외한 거의 모든 콜백을 실행</p>\n</li>\n<li>\n<p>Idle, prepare</p>\n<p>내부용으로만 사용</p>\n</li>\n<li>\n<p>Poll</p>\n<p>새로운 I/O 이벤트를 가져옴. 적절한 시기에 node는 여기서 블록</p>\n</li>\n<li>\n<p>Check</p>\n<p><code class=\"language-text\">setImmediate()</code> 콜백 invoke</p>\n</li>\n<li>\n<p>Close callbacks</p>\n<p>e.g: <code class=\"language-text\">socket.on(‘close’, ….)</code></p>\n</li>\n</ol>\n<h3 id=\"동작-원리---callback\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC---callback\" aria-label=\"동작 원리   callback permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동작 원리 - callback</h3>\n<p>ES6 이전 callback함수를 이용한 Node.js의 이벤트 루프는 <strong>Task queue</strong>를 이용하여 작업이 수행되었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">first</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">111</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">second</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">second</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">cb</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">222</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">third</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">third</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">333</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">first</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// ????</span></code></pre></div>\n<p>앞서 정리했듯이 각 함수는 콜 스택에 <strong>FILO</strong> 형태로 쌓이고 수행된다.</p>\n<p>따라서, 위 함수들의 실행 절차를 살펴보면</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1144px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACYUlEQVQ4y5VUTWsTURSdhQpudOFGqwii/g51Iajgwv4NwY1LofVjIUhBQ8uESLBdpESpsaUbi4ZY0ZZsSmpbOslMJibMZGaSTDIh38l8HOdOTVvaxNYzHN7MvW8O79173mMsy0K73UahUEA+n0e1WkWv14PjOKAHFvZoA2bNgaHW0Ci1gC4O5ZlsNgtFUZDJZCCKInK5HGRZhqqpaNZbWNwI42MqiAg3jU+pacwlg5j9xeIDF0CEf7cTT87g/VYAa0IcTLlcxiDkFRkto4OHibu4x41glLuO++tXcGP+Am4tXsTNhRHcjl7Cg+RVjG5fw53N85jjgmB0XfcEbNveJW1XURXUjQZCgg8BbQxB5QXeSs/ApsbhT49jansMfvGpG3/u5VjpCVbE6J4gifRHelVVFZVK2RVt4rjQFG2YoPNXsAK9XPLipm3Csi2X5gG6MceCafUg5+WjBanrxwU190hBQRA8S9HkYaS55Ix0Oj1YkEATqEGdTsfz6UFSfH+u1Wp5/mX0UpFkYLs1cNyaOHbP/bQgS5In+L9gdNcagyBJ+Z1mmOaurZrNpreSWq3m5iXvENB2KUY5WilT4j+jzU3C2GBR3WRR35pCRwhCk3jX3BpCoRBisZgnQvUsFoueiKZp3th/p2PL8zyYwvdHyLIMBPYURP9JpCYZFGfPoaoksPR1GT7fG4TDYVCtDcP453ZJlCmvPgaWTkCZOYuE7wzMyGkgehlS6iddDYjHV9FoNNDtdtE/9/TjflKMSkBk+LUF/P7xEslvE1j/MgF++RUyK6+Ry3CHVkAOoNtpGAl/AE2CSDloMY2XAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"flow1\"\n        title=\"flow1\"\n        src=\"/static/cea6f34e8ce6049addffa06e3615be82/ee3fb/flow1.png\"\n        srcset=\"/static/cea6f34e8ce6049addffa06e3615be82/5a46d/flow1.png 300w,\n/static/cea6f34e8ce6049addffa06e3615be82/0a47e/flow1.png 600w,\n/static/cea6f34e8ce6049addffa06e3615be82/ee3fb/flow1.png 1144w\"\n        sizes=\"(max-width: 1144px) 100vw, 1144px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ol>\n<li><code class=\"language-text\">first()</code>함수가 실행된 후 <code class=\"language-text\">console.log</code>를 통해 <strong>111</strong>이 출력된다.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1170px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC/0lEQVQ4y42UzW/cZBDGfeJSIVRAagOoJy4IISQ+ToA4IA49cEFw4x9Ayp9RUA4IpEgLaRugqVArvqtSKJWgAtQmJEQFtukGxxtnu/7YtTdrezdrrzdr+8e8XlCXVgJGGr/j8evH8zwzr7UkSYiiiEajQb1ex/d9BoMBWZaR5zlZDEUCuawMIWz1cE2P0O1P8uLJAOJBTp7laM1mk06nQ6vVwnVdPM/DcRzJ7eJ3PD6ovsXJP95ksTbH+/ocxzfeYOH6sTJ3cnOODzePsbrzNuvme1SNKlq/3+d2U9X5no/rObxWfYqXNo/wsv4wR1eO8Ownh3j+yxme+/gQR5cf4lXjaX5YfYLV9Re4ov+IFoZhCaLoFUVRxmmaloCe3+aC8xEXukt8vXuar/wlznsSq7V1itPWEmfty1zzPscIznF963c0pZ8yBfY34Gg0Kql3/A758A4CqG29kQom9346WetG/T8ARdu9eE/eU/mM/TzDS0SOYcZYYpVrxTn70gzhiGEY/w7YFk/iuMz1RwVtCZPxrUpVlWFalKWqq67rCnCiYSFfLIq8fJimwxIwCrvoxjYbNz02TAfbtnBtG9uyuGnZ/LrtljlbcpbVLEdPC7cMKSmnuCUJY2HjyujIaElVOaPsryqEQZZP4o5om+ZlKeRT7LSoJYDONYp4BwamcDKJI4vfzDb9/akuTJlIiDcYU2TjOxqmRVdn0SsHqL47g37iMBuVg5ifPiM0zHKDGnZlsWgZRwFB1Odnoy0dNUrNLKHf7XbLBqp+aL3lWcIzd7O1OENt4TDGiYMMv3mcwG9y5eoK8/PzXPr2Iu3dkMcWbvDIokmjG5NK9/t7A9TBUN7r9ajVanJSll9n/NldAnQf+vF7aZ06QHbpUYJdh+++v0ylUmF9bQ2vG/LiGZNXztn/mIrp6SjHpvPTLJy/B33xQVbeeYD0i/tJLj6J1dgqN6nulZTlh+EIfbfdxlKdvs0V9SAI0OydG9j1VdztX2QVN9aw6usyMsHUySj4v/YnHsA7XvweZpkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"flow2\"\n        title=\"flow2\"\n        src=\"/static/112df9d14354b98e7e578668f28bf097/105d8/flow2.png\"\n        srcset=\"/static/112df9d14354b98e7e578668f28bf097/5a46d/flow2.png 300w,\n/static/112df9d14354b98e7e578668f28bf097/0a47e/flow2.png 600w,\n/static/112df9d14354b98e7e578668f28bf097/105d8/flow2.png 1170w\"\n        sizes=\"(max-width: 1170px) 100vw, 1170px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ol start=\"2\">\n<li><code class=\"language-text\">second()</code>함수가 실행된 후 <code class=\"language-text\">setTimeout()</code>함수는 콜스택에서 바로 빠져나오고 런타임의 <strong>Web API</strong>에게 요청된다.<br><code class=\"language-text\">cb()</code>함수는 <strong>Task Queue</strong>에 쌓인다.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1138px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACyUlEQVQ4y41TS0wTURSdhSyQmBg/CK5IZOXGxL1x4YZoYjAhrlU0bnTjUiCauDEuSKCIH4y6qNQoCQElaEBQQtSaUpCWfiz90JZ2Zmg7w0w7pfM7vjdYLCiBm5zcl3nvnbnvnnOZQqEAURQRi8UQjUbB8zzoN1VVoes61goqNEWHWtChFw3IQh7L8RTYJIeiXIKuGOS8BkFRoSglMJFIxCJJp9MWOI5DIhFHMplAZiWLLlcH2mcv4a77Gu64r6Lt6xXcnr6M9u+t6HC2os3dCvv8Dcx4bmLS+wKMLMvYGoZpgOVYZAnhLX8zzvrrcSFwDOc9DTg1UIvTQ3VWPjNaj6ZAA3qCJ+D6chzjwXtgBEFYJzEMmKZprUulEliWxQq/Ahc/Bac8BufqOJwizWP4If1dfyPwSxPIlKYQ5t1gaP9oULIyIe0fJaSt0BUTuw15VdmZUM5LIDvQTW17GJp1TxBzhFDIUTryZA0m3TB1lNaKFiEVKJ/Pb/rhdrAISfsYUVb/KV0nSKdZy07UBclkkiif2BHUekwu8AalgA0FX68Fcf4hRO9T4rXQn8qMjSoMg6CiosrKqag0mOXhJvg6GSx0V2Ghaw+c9xks9h0EG5srX9lEUElUJqkMRvjUAozUIPTsCGa6a2EMHYD5oRHxxXXCvCxt2ErI8FAkkdiJQzAYhM/nszIVjyKTyZAeTlyEPrgP4edH4X1UB85+GOpII/hkAP5ACD09NgwNv7M6e33Ag5Mvo5hPSWQc85DkvCWaJEnWuNJJY6TJFsiOanh7axF4cgjhvv3Q3jdA4MKY/DwNm60br/odxEtFNNu9qH7ghTdLZTOg6YZVefnpuRyxTfbjOWCQ9O1xDWY690J9WwWNjNZSyG0dCvj9ZHJUYikDC4sx+BM8lhJJS/n/gYl5RpH6aUfE5cAvpwOJ2X7E516DTSW2iLC7afkNzoEu7BHVNjAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"flow3\"\n        title=\"flow3\"\n        src=\"/static/a0d753e8f2526347a48bbac0123949b7/05fb0/flow3.png\"\n        srcset=\"/static/a0d753e8f2526347a48bbac0123949b7/5a46d/flow3.png 300w,\n/static/a0d753e8f2526347a48bbac0123949b7/0a47e/flow3.png 600w,\n/static/a0d753e8f2526347a48bbac0123949b7/05fb0/flow3.png 1138w\"\n        sizes=\"(max-width: 1138px) 100vw, 1138px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ol start=\"3\">\n<li><code class=\"language-text\">third()</code>함수가 실행되고 <code class=\"language-text\">console.log</code>를 통해 <strong>333</strong>이 출력된다.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1184px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAACNUlEQVQ4y42Uy27TQBSG/Uit2KCukZAQRRVlA1IlLhtuArFhw0OETQUPgNizKyQUIVWoqBRaoaaUONix4/HYcWwndmQ7sf0zZ0IgoSnlSL+OPDP+fG5jJcsyxHGMTqcDTdNgGAb6/b5cK8pC+jiKEQkNBgP4oQ/d0ME4QxRHcs8T3o36SJIESrvdBmMMnudJqOu6UkeNI6T9IV7sr+Pe7gU82r2MhzsruLu5jNvVi7jzdhn3ty7hwecVbOytobp9DV+bn6DYto2iKPC3OS5HEgrgj6dYay7iVmMJN76dxZXqIlZfL2B1YwFXP5zBTX0Jmwfn8f7jOXxnX6BQdGmaSkhZlhJO3uY2wiCE4WrgoxasRANLNdi5Dl7o0rOhLte7uQGeqDAtYwykOk6AJDLOOfzAR+j3ZkMvpzRluUDYzD4F6AtgGOB/LC9GoPL9ExiGIUzTRK/Xk/AgCOaKzjmOg1ardTLQsiyMRqMZGPl5or1utyvHSmHixWw4nAuc1/3TTLHF7GWTLv+CktF8HqtTEgNpJLrvi0ugQ1VV+eEoimTalKnCdraRMguinTPAyTjVajW8qdaQDSK83DXx+J0D1e6K4x5cEQxdCEqZak5BKFb9AENKrReiHMS/oVSTZrOJSqWC9WfP0WlruP5Kh/JkD4f+aBzx1OhQdGMgd/40RdRycoa6S1av1+U4lHmOfdXEVoNDNy1Q7dtClDJlQx2mTiueCJsW6YGTROgk+lFM0sfxOT7RfgLxhxDPOsD+VgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"flow4\"\n        title=\"flow4\"\n        src=\"/static/88c8550944705cd4991e2bebe0daaca1/7321b/flow4.png\"\n        srcset=\"/static/88c8550944705cd4991e2bebe0daaca1/5a46d/flow4.png 300w,\n/static/88c8550944705cd4991e2bebe0daaca1/0a47e/flow4.png 600w,\n/static/88c8550944705cd4991e2bebe0daaca1/7321b/flow4.png 1184w\"\n        sizes=\"(max-width: 1184px) 100vw, 1184px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ol start=\"4\">\n<li>모든 함수의 실행이 끝나고 콜 스택이 비워진다.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1144px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACY0lEQVQ4y4VTz2vTYBgOyvAgiIf1Otif4Fk96m3o3ZOg+BMPggcF6w/cRb04BcGJxYMguoNCO09DZKtzLWuHrkmL7ZquaZIms0nTJm26Jo/f9/UHs2vrCw95k/f9nrzv+3wv5zgOLMtCsVhENpuFqqqwbRvNZhO+78O1W/AcoO348BpA02pBLqjQpB04VZLT6MZITstpgxNFEZqmQVEUBkpIybfyW2i7HubXnuD+xgXMJq/jUfIqHsav4F70Eh7ELjOffptNXiM5F/E68RgcrW7QaGWyUmJ/D/48j1P8JM4K05jZnMLJzwEcX5jEiU8B5s/wUzjDT+O0EMCd1DlwhmEwEs/zGBE113UhyyU0HRffxSUsW2GsGIsEEYZoNdL3V8zuk+SsyV/BmabZr6pH2GqROckybMeGqe/vYJQ1qu54QiqYWlZpFLveLtr+cNAYtYpR+U+FRG0q0t74KFCj4xtLSGeZyWQgSRJTfhxoTi6XG01IE/aqPqqqnt8TlTNJ30zl9i58OgvfQ8tt9An9HroEg9dr0DjTauxPJJAkueOTtjtfyNB3dOhkCegi0FHwPA9BENhC6LrOwP1JL6C+fhtGLIhq/C7Kq0Foy7egFH8Bmo7a+7cwv0SgWw5SuQJqdZutaq1eR70L+k4FpHPnyt9u4Pcch9TzQ8i8mMD60wkIcweQzf2AkRZRDr1C7cM7VAh5vqT2l2AQrIMKvTarN4HFg7A/HsXGsyNA+DCU8DFspmKdw1kBqFVBj2yL+Y7iBNIQFAoFcNv8EuTEPArxENLRN5ASIRRjL1EShX9EwRABhtlfYDJJsmcrlmgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"flow5\"\n        title=\"flow5\"\n        src=\"/static/afd959040d7873f539dfa6547c63940a/ee3fb/flow5.png\"\n        srcset=\"/static/afd959040d7873f539dfa6547c63940a/5a46d/flow5.png 300w,\n/static/afd959040d7873f539dfa6547c63940a/0a47e/flow5.png 600w,\n/static/afd959040d7873f539dfa6547c63940a/ee3fb/flow5.png 1144w\"\n        sizes=\"(max-width: 1144px) 100vw, 1144px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ol start=\"5\">\n<li>\n<p>콜 스택이 비어있는 것을 확인한 <strong>Event Loop</strong>는 <strong>Task Queue</strong>에서 대기하고 있던 <code class=\"language-text\">cb()</code>함수를 콜스택에 담는다.</p>\n</li>\n<li>\n<p>마지막으로 콜 스택에 담긴 <code class=\"language-text\">cb()</code>함수가 실행되고 <code class=\"language-text\">console.log</code>를 통해 <strong>222</strong>가 실행된다.</p>\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javacript\"><pre class=\"language-javacript\"><code class=\"language-javacript\">// 실행결과\n111\n333\n222</code></pre></div>\n<blockquote>\n<p><strong><a href=\"http://latentflip.com/loupe\">loupe</a></strong></p>\n<p>위 사이트에서 대략적인 플로우를 확인해볼 수 있다. (callback 한정)</p>\n</blockquote>\n<h3 id=\"동작-원리---promise\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC---promise\" aria-label=\"동작 원리   promise permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동작 원리 - promise</h3>\n<p>ES6의 공개로 Promise함수들이 추가되고 이를 처리하는 <code class=\"language-text\">Microtask Queue</code>의 개념도 추가되었다.</p>\n<p>앞서 정리한 Queue의 종류를 바탕으로 이벤트 루프의 동작 순서를 정리해보면</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">first</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">111</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">second</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">second</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">cb1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">222</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">third</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">third</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    Promise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">cb2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">333</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">fourth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">fourth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">cb3</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">444</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token function\">fifth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">fifth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">555</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">first</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">setTimeout()</code> 함수만 사용하는 것이 아니라 <code class=\"language-text\">Promise().resolve()</code>와 <code class=\"language-text\">requestAnimationFrame()</code>함수를 이용하여</p>\n<p>동작시켜보면 동작순서는</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1132px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAADFklEQVQ4y4WUXW8bRRiFLSEuEBdVxI9AgkqQXARVhb9QNeGKCwqUcoWEhICmBSSQWoRoY0IgolHSCNfUkWghTUqgF1BhgitqQteOvzbx99q7a29s14RKdvz5sDMbIwVE2dXRnNHunD37znvG1Wq1aDQaGIaBpmlUq1V2d3fpdDr07Zs20N2DPe034K7xJ3XzHticDs47e3Btbm5iWRaFQkEKCuFcLodW0KTApeAM539/C/evp3EHTzN5+xTn10/ivjPBJ+G3md54h0833sUdOclicA6XEPjn1W63KZVL0tWHG69x1P8Y48sjjK8O8+x3w7y8dZhXsk9zInOYE2mbp57h+cww7vAErmKxKEV6vZ6EuEQJBoJLqgev9RGL1hSXS26+NPagT+ItTkp+2fwYb+UcK6pvv2C/35e82Wxilk3HYch2ePNxxq6McHRpWGJs2R6/fpLx6yOM2fNjtw9xLDMiy/CfggOHV9R5ZovvMZ87y8XiGS7q9lg4I/mC4fAF/QPmrff5JuH5H4d2Bc4qr3LE/yhj3z7BkZWDvKCO8lL6KV5MjjpIjXI8eYjn0gc5p7xxH4elkhRcVa7yVWKOq9EFluIeriU9LKcu7cNK2su1zBf8GF+9j0PTdLa856DXhJJmUTP/oGrU/0alWKOsbbNdqJFL5YWgJju2123R7zld3Gzcs/tRl3p36zXanRadbptILMJ2xZLlELBsrtnrY4ko6pZK4FYAl25W/9WHu7bRSq0uRT0eDz6fj52dHdbX11FVlXg8TiKRIBQKoSiKRDgcxu/34yqEFmneeZO6nYJ68JQct395nZoRJZ3JMzVl95jXKyMZjUZlmkSS8vm8FFVCjlgkEmFtbQ1X7uYEyZkHSHw+RHL2ALGZA+TmHsJIfC/dFuwIipp2u125SMRUpKtcLpPNZonFYtJ1MpkkEBC//PME/PAgFd8jKNNDdFeG4PrDmOqNfWUQh8jg8KhUKhKiE3Rdlx8QXIi6tpQb6L99RurWLJGfLpAPzpIOTFPMxpxNtp0Ndl9kXMRyAOFcnEwCgovnfwGOCAFy3TmcCgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"flow6\"\n        title=\"flow6\"\n        src=\"/static/e42360942c49f83cfd08dcc3d1fe86a6/ae953/flow6.png\"\n        srcset=\"/static/e42360942c49f83cfd08dcc3d1fe86a6/5a46d/flow6.png 300w,\n/static/e42360942c49f83cfd08dcc3d1fe86a6/0a47e/flow6.png 600w,\n/static/e42360942c49f83cfd08dcc3d1fe86a6/ae953/flow6.png 1132w\"\n        sizes=\"(max-width: 1132px) 100vw, 1132px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ol>\n<li><code class=\"language-text\">first()</code>함수가 실행된 후 <code class=\"language-text\">console.log</code>를 통해 <strong>111</strong>이 출력된다.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1188px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAADOklEQVQ4y22U/WtbZRTHQ8Hf9svE3/en+IugbBXfRU2E1q0snWnmhq3ISrcq3axlMBipU8TfxLEOi1Xcuna2tFk7heTm/b3JzXua3LzcvK5J2o/PvXVCnRe+PA/n3vO555znnMfQ7/dRFIVsNovH40GSJDKZDOVymf39fZqNJjWlRr3W0FUuVgj5wvhcAYo5BVVpUCqrFMo1VLWBodlskkql6HQ6tFotXdo+X8jTUttsxze56HifiQ0j45tGPtsyMeUfZjpymsvBIS4J3fWdZVsysx1ePARqEf73Uesq7WqdexEPZscwn269xYWtd/lk420m40YuZ01cyZi4lDVyO3gOn3eEv3Z+PgQWi0UdoqV4cHCg76u1Ko1qiz8SfzITG+Hr0Hm+CoxxzTfGVa+FGbeFa55zTLs+ZyoywVxpjIfxX48CNdhToKpWKJXa3I+tYZFewbz8KubVQcwrhxpdOcmZ1dcZumdi3PMGE8k3+T12+x/g7u7/AKukCy0eyXamw0PMBEb50m9mNvMxcwUL1wtWrqQmmc1bmBO22dwoDxO/CKA4gGKp9AywXK0g59vY4w8YfvQiZ+6/zPDSS1idpxiPDHLWY8Tqf4+LwUEuBF7jfOQUS+EfBTCfo5iIHdaw3xXqaWgKFZW0UqcmwOlsml2lQDqfRhYt5YwkkYQSwi+eSJBMyiTkhN56hrrfzW40+cwpy5W+gFSO2GyrfgYm7XyxlqXfaYlOaIj6l4jvxPXWi0ajGFr7UFiforTyAZmVEZT10+RXPyL8eF44tPF6PdxZWKD3pM3dDQcffr/O4qaTWDiIx+vF5XbhdDqRXBIOp0MAn0Dut5Ps2AyE5o8h3ThG6OaA+ME7KKJtbn0zj81mE04SuZRMPSeTS2vpyvh8Ph3mcrlwu936amh0QBHOjTvPE/3hBP7vTlD56QWamyZUEb6c2MFut+spS8LBGwgSCoeJRCI6UBvVp0ANbmiKCMvLg7A4QPjb44RuHYel52isaxF2jtZVlvWp0ua8Uqnoh6DVLR6P6+/0GjbbXdzLV5GXzTgWrTxesJJ8YCawdl1MS1MH9Xo9fdUukr29vX/V7XZ1mybtG23S/gY0ULP8mWoKewAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"flow7\"\n        title=\"flow7\"\n        src=\"/static/47e75dea966dced0a319cf9ab17fcdeb/df56e/flow7.png\"\n        srcset=\"/static/47e75dea966dced0a319cf9ab17fcdeb/5a46d/flow7.png 300w,\n/static/47e75dea966dced0a319cf9ab17fcdeb/0a47e/flow7.png 600w,\n/static/47e75dea966dced0a319cf9ab17fcdeb/df56e/flow7.png 1188w\"\n        sizes=\"(max-width: 1188px) 100vw, 1188px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ol start=\"2\">\n<li><code class=\"language-text\">second()</code>함수가 실행된 후 <code class=\"language-text\">setTimeout()</code>함수는 콜스택에서 바로 빠져나오고 런타임의 <strong>Web API</strong>에게 요청된다. <code class=\"language-text\">cb1()</code>함수는 <strong>Task Queue</strong>에 쌓인다.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAADYklEQVQ4y13T+2tbZRzH8e4H8QeZE/ZDwYIi7A8QFPwLRGEMmboOpN3aurXYupG1E+lWnbXoquLll3kZK3OiSClZmXGVMdBeTEnTJqdpbm0uTXJyOUma60maNGnSt09O2gl74MPhcDgvnu/3+T4te3t7FAoFstksgUAAr9dLIpEgn89TrVapVCoUC9uUd8paSqVtwnKYUFAmncpQLpbJFYukSkVU8Wxp/LC5uakBmUxGg1VVRZZD5NJ5HCEJnekk3fdf5dxfr3H+4ev0G49z0XqCiysn6LMcZ8LSzt8Lb2JYvEHLzs6OtqPHV6FYIJ9R8Sgurvv6GTZ3MrLSxbDpDGP+c4wn+xhXehlL9HIvdIE1Vz/zjt+aoKIoGlKv17U0Vi6f08CNqJNx//uMSF18bO3hI0u3liumLq6auxkRGV0/z7V4N3ddvwiwXH4ENvrZSGPlD8CYg0/We9DNv83Qv6e5NNeObvYUun9OMWRsZ3DuJJcd7/BB7DSTjgkBisYryWbJe/Vdkdo+mBE9FKDi5DNfH8NSB1dXzzDqP8v15Lt8nujh01gv1yIf4tgcxO3uw7QuSi6nU8T9gSa4Hw0sVlDFDtfDa1xZ6eC9mTcYmHmLQXMHl9Y60VkHGJQGuCzpmDZdwLBwllnbbVpKfh+KNAvheWpZid2URWhW1MgSW+k02WKVxJZIri5wFZNHxeHJkAilSIW3CAfj2ANplHgGORQVJYvdJMxfkr/zFPYfWlm70Yr3x6dJ/PGKKFdlV3xXq82D0pvcHBqZY/SBG8pZomIO7XISv88rRs/Pqm1VgKJlytIXYHiG0J02bN+3UdIfRTW8SF4t4nLYmZi4RTIqc9/s5oWxh3TeNmJ1uJm1urFIElarBYvVitFoFGD9ADxC7Nc21m8+S37yANxGr9fzzbffIS0t8qcU4Mmhe7w0/gCDFMRscyJZVgQoIQl4cXGxCSaXv6IyfRTHT8/jvPkcoZ9bKc68TDanatfP4/FoJW9sbCBHooRFYpGwKNWHzWbD6XTicrn+B+WFUZg+RPDWYZa/Pszu1BNk9MfEYaQf3ZzGfMbjcVJbSVKpLZG09i7LMpFIhGg0it/vp6UmwLDXjGL/naA0hXd5iujaJKHVu2IWVQ2r1WoNsXmb9of/4AI8vv4DcwusqePNs9wAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"flow8\"\n        title=\"flow8\"\n        src=\"/static/7b65f6608f090893cfb4a06ad551ef1f/c1b63/flow8.png\"\n        srcset=\"/static/7b65f6608f090893cfb4a06ad551ef1f/5a46d/flow8.png 300w,\n/static/7b65f6608f090893cfb4a06ad551ef1f/0a47e/flow8.png 600w,\n/static/7b65f6608f090893cfb4a06ad551ef1f/c1b63/flow8.png 1200w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ol start=\"3\">\n<li><code class=\"language-text\">third()</code>함수가 실행된 후 <code class=\"language-text\">Promise()</code>함수는 콜스택에서 바로 빠져나오고 런타임의 <strong>Web API</strong>에게 요청된다. <code class=\"language-text\">then()</code>함수는 <strong>Microtask Queue</strong>에 쌓인다.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1136px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAADt0lEQVQ4y42UXUxbZRjHm3jjjWPzIwFmcJdeGEnMXDTRmxmTaUhU2NgS5+LN1Kibc5NgItnYYkgk0WTMMRhQxse+dOuKg2YffE0sZaNAy3pKKS2UnnP6BQqlUFr68fPt4Uq98Un+Oe/JSX75v//neY5ubW2NaDSKLMt4PB5CoRCrq6skEgmy2SzrqwnSiQzpjQyZ1Oa7Mhcg6A8TW1ojHc8Qj6dYSaRYjSfR+Xw+IpGIBsopHA5r8Nm5WQHKctZyks8HSzhyp4wv75ZypLeM45Z9VFj3UzFazjFrOeceHWTA/BG3H1Wjy7n5d+WcBYIBUusZLkxXc3jkLT7te5fDvXv47ME7nHC/R6VcSqW/lK/lD2j2HGBibD99kgAuLy9rkEwmo4FylUwmUQMqG+spbrr1NKgnaVa+p0k+Q6PvDA2zp2nwnqbRfYp6bxUmtQbPQi0jvkvoorGVTVeZtABmcic2kgkBVEivZ/nRUcHegWLKfnmVvbde0bSvaydlxp2837WL3ddLONVfyt37b2N4+I0AOp0QXSWroTYrmUIAAwKYwujR0ygc6gM1XFR/4mKgjvNyPbW+Gs4pP4hv5+kNXsC8UM+I0o4uprohJJFdmYN1VVNKnFXVR0zE+531GG+aXma34XXeuFxMycNdlDuLOSC9pOlj94u0Du3B1P0apvFP0C1YKgm25KF0PE/oSiGBzkKUtudwSGYW4nDfNkSv20S/u4eR2W5s/m5+n+mm13WbfqE7LhO9zgEee3oYnx4UTRmpJG54FvXyDubaiohcK2LNkI8y/eA/3TeOBqnqkRmbXiT+Z4xoJIrXv4LPv0gkuERADosMRZB0bWGmZTtSQwFKewHZ357BPzWgQULhING13GilOdgygO7EPTqHXcQWA8yqQSa8MpLDjuR0MDZmzTkUwO6nmG8rxPZzPis38knd2kZkzoLXp9La2kJjUzOp2BJHr1jYWj3Ioc4xsSk+hiZcWG2TPJ6043BIWK3WnMMK0sY85PbtuJsLxLOQpOFpFnwjeGYV6urOcv3XGxrwq6sWtlXd45B+CKdnjj9sLiZtE9hsdux2+yYwNvot6yJDZ9MO3PoiZvQvkDQKsGtQu7Ii+1leiWlD9WGTuPIXRq4NTTI8rTImuTV3NgGTJInR0VF0S+ajIsMnUC5txVy7hQ1DHqmbT+J39v2zI5kNrlqmOd4lYXYpxP5aEKOlkvsXzAvl9t/r9aLzT/UTmGjFZ+1gargdebwDv1WPMu/e5KTT2kpm+X/1N7hC19iQiKKeAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"flow9\"\n        title=\"flow9\"\n        src=\"/static/e008949f2ab0d233d8e1b296cfbbeda4/f32b7/flow9.png\"\n        srcset=\"/static/e008949f2ab0d233d8e1b296cfbbeda4/5a46d/flow9.png 300w,\n/static/e008949f2ab0d233d8e1b296cfbbeda4/0a47e/flow9.png 600w,\n/static/e008949f2ab0d233d8e1b296cfbbeda4/f32b7/flow9.png 1136w\"\n        sizes=\"(max-width: 1136px) 100vw, 1136px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ol start=\"4\">\n<li><code class=\"language-text\">fourth()</code>함수가 실행된 후 <code class=\"language-text\">requestAnimationFrame()</code>함수는 콜스택에서 바로 빠져나오고 런타임의 <strong>Web API</strong>에게 요청된다. <code class=\"language-text\">cb3()</code>함수는 <strong>Animation frames</strong>에 쌓인다.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1134px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAADlUlEQVQ4y2WUXUybZRTHe2HijagXwwhzWeZn4sWMukQzDXGLxhmBGE0MJjObliW0OHQY42ckhrEPh/Nic0YEHVyYRTYCjn3wPRiMtWXQL2hp+7ZAbaFv+7Z9+3ZlpYSfDyVeTJ/kn3Oe5+Kf//mfcx6dqqokEgkCgQCSJCHLcv6ezWbJ5XLE43G0TIrUbZX0ssZSdBGfz8dCcIFkMpmHnE6ypCXQ0ho6r9ebJ4hGo8RisXy+/pbP1QTVA+VUXHqBigs7ea9rJ3uvvMwBy24qzbvRm15Bb9nFxbFyzve8yrizF926gv8eTdNQkyopLcWJ6Vq+se3j20k9X5s+oM6u53vZwPFIlYCBYwLj/lrGXNU4AuPo5MiSoFhjNZcVWMnnihLNl5LSVH50fk6D28ARx0c02KtpsFVTf8tI/YSB+kkjh61GpvxfYXZ9ijNwE10srv1PYSqzKgjVPGGdTY9x7E0M/WUYBso2Yl+piKUYB8uoGi5jwL6f7rF3mZJG0IVG6wh3lvB31x6Cna/jPvcas+2lpJQgqXSak47POOyuosFh5MiskR+WamgM13BysYZjiwdpDR/CNvcl1wOHRMlCYah3H6GWe/H+WsjsL5uQmh7A37oVNTZPUnhZa36H90deYu/lEvYP7eKg9AY1Ap8IGKQ9NErlOCYq6LtZhlW6Jjwc/BD6H8T3+1asZ7ZATxHaX08Tlxe4k83h9NiRwh68QRdu3yQz7gnM1nFMUxsw203CPws37DcIzAfQRa9VstJxP3Otj2D/uRjl3EOkOp8kGvbd5aua0Hj7rI23/vAgx9NkM8tkbi+jRBUi4QihhRDBhaAgHKqErgI8zZuxnylG/XOd8HFiS5LoNwwODoiZjKKI8Xr+6BW2N44INS78Pg8eMa8Oh50p6xQmswmbzYYuMqiH7vsIthVh/elh7nRsInFhGxk1zKXLPZw+dYq2tlaURJIdx3u554s+GvtdJOUwVpsdp9PJzMwMVqs1H3UxUXKmvQBXUzHe5iKk5kJB+BhJ0ZSIHOO3lhYksWpKPEHJias8c7SXjuFbuJwOLBMTWCyWPEZHR/OkOmX4AFwswNeyGXdTEenzhaS7niC2eLeHMSXOo99dZVvDEHOLsvA0LlbUh9vtxu/3Mz09vaHQ3/sxy91P4Tz7HKOnnyXRtZ359heJhDYIV1dzrK2tsbKywnw0ybyiERflq2KT1j+Wf7G+WWkxt/8AL6+F1XLGMtkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"flow10\"\n        title=\"flow10\"\n        src=\"/static/2e659cb4367b13d132139cfe8f489c8e/75a80/flow10.png\"\n        srcset=\"/static/2e659cb4367b13d132139cfe8f489c8e/5a46d/flow10.png 300w,\n/static/2e659cb4367b13d132139cfe8f489c8e/0a47e/flow10.png 600w,\n/static/2e659cb4367b13d132139cfe8f489c8e/75a80/flow10.png 1134w\"\n        sizes=\"(max-width: 1134px) 100vw, 1134px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ol start=\"5\">\n<li><code class=\"language-text\">fifth()</code>함수가 실행되고 <code class=\"language-text\">console.log</code>를 통해 <strong>555</strong>이 출력된다.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1158px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 71.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC90lEQVQ4y4WU3WsTaRSHc+nd3vhP7J+wN14t1e4uuH6wVKQs7BZRoa2auotbdWFBdNlSPwKiF8qiF4qo+N3WtpvUFNMkkzajyeTDTdK0mcw0Lahrkskkk3l8Z6pCla1n+PGeeeF9OOed8xtPs9mkXq+zsrJCoVBgcXGRWq3m7tniMY0mltmm3WpjWzaNuom2qKMWNYw3DSyjTdVo8dq0qBsNPKVSyQVVKhV0XUfTNJaWllBSCrYJt+S/2RvoZN+Drex/LDS2lQOh7XilnXgjO+mL7uBqpJuJ6S7uBc/jcQ6bpjj5UWh6Gatu82j+Or1z39H3ZDv9T7fRO/U9g/NdHCvv4ri6iyNivZ37ifDz3UzEL+FxqqpWqy6k3W67cqKklmiJdv4p3Gcof4DTmV8YTh8WGmAo4eWvZ16GhE499zKZ/53MwnGmEzdWgc6dOWHbtisXWC7RNuBe7ip7pK/pGdlCz/hmfh7toGdsdd0j3n8c7+CK9AP+0DZGohf/H6gKoHPhk4W7nMju40+ln1OpXobVg5zRD3FGO8iwkE87hFQ8SrR0mKBy/fMV3n5xme6Zr+ge2UT36Cb2Jzvoy3fSn+ukV2gg/w1SvIvgzLf45QvrVKiqWC2LYqlIpqiQ116QysuksrPEnoUJz4UIx0NE5BkiSsSVnJTXB7as1povf/qxwpdn40xkX0LTpF5r8Prlf+iqTkVfJpPJrtOymE8nkskkU8Ggmx+5NsUXg2OcG5dZyGVJZTIkkgliszHi8TiBqYAALq9QazQ+ATqD7kB9Ph9nz/koF/P8cT+OZ+ARWy6GREUaiqIgyzKJRMLNQ6GQAGYzVLXy6hwK2Ic5fFdhIBBgYnLSzY/emGbjbw85eWeGf9MKs3NzRKNRJEkiFovh9/sFcDpAQ1MFzVrrFGFBy1q7N3gzzIZfR7kpFTDfvGK+uEA6nSaXy7mKRCLCy5VlCsK3y46HRZuOFZ12nRYcoFPxKth2zV9tNKnW6q67nLs3DMP9kbzXWy7Bx+9MRlDQAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"flow11\"\n        title=\"flow11\"\n        src=\"/static/74ca54ea7bfa4d1c25f694857879690a/1132d/flow11.png\"\n        srcset=\"/static/74ca54ea7bfa4d1c25f694857879690a/5a46d/flow11.png 300w,\n/static/74ca54ea7bfa4d1c25f694857879690a/0a47e/flow11.png 600w,\n/static/74ca54ea7bfa4d1c25f694857879690a/1132d/flow11.png 1158w\"\n        sizes=\"(max-width: 1158px) 100vw, 1158px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ol start=\"6\">\n<li>모든 함수의 실행이 끝나고 콜스택에서 한개씩 <strong>pop</strong>된다.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1128px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAADGklEQVQ4y4WT72sbdRzH88QHgj5T/wWZT3SODQRRtyf+GAibw42trTCxAVFbZdR2PxCZa8d01M6tFacwqaMDdYZVsmqEzSaLadM2yeWSJWvSXJPcXZostkmTa1qTvPzeZU82xH7gzedzfI/Xvb/fe39t6XSabDZLLBZDlmUSiQSKolAoFDArmpSJZEJEsxK31TCSModXmuQvyYOUnCOiiLXFEDFVIr4QxZZMJnmwDMMgq2ahAQOzXeybfJo3r+1g/8R2Dvy+g87bL2K/85LoL9AWe57R8Kv4vLv4xXsSm+nGrEajQbPZtOZarYae06AOl6Pn+fxON4OxHs5GjvCFfIQLuV6G832MLPVxrtCHU/2EQOY4f0iXsKVSqf8EanoLOCx9SlfwdT707KP71huWujx7ef/mHrrde7G79+CQDxMKdnDdf25z4MXwAD3B/XzsaafX10aP5xA97pb6fO0CepArQTve0DtcnxneBCjO8LvoGY5GD3EicJhjs2/Rr3dyOt/JwJJQTsyif6bbOZ7vYFS+sLnDfvdHHHQ9R7tjJx3ju3h39hXeC752nz4I7MYe2sl5z8n/AWqaNRfzRYzVKpVKlbv5JQpqjqyisriQIS2USWXFs4a6qLOQSJnAhXvAugAKSzSprRloqvpAmBq8PRbg0X4/rliOxnqVcqVCsVi0cqzrOnJEFkAlfe91E9Wq2gZiy7nW7HOzEZoVi3WO/uDi5SEXjj/9xCJhQpLE3JwIuteLz+fD6XQK4HwI1uZpluOWqM6zXgihFTSa0TDGpRE2Ln9LRQS9nJ63Pr1urFIql8lkMpgXw8yyeeNmZmawJW6eIvH1w8gjT5C4+BjTg48TGHoENe60HK6N/8g/07do5nVOfONg99BvXL0xRUQKMu33W85M+cU8MTEhbor3S3A9yV3HVpSxZ/j72laMq1vQPD/BqkGjUqZRN8+2Ttv3Ph7qdfFrUGG9UkIRruLxuOXS/LlTU1PYojcGqY5vIT66jcmvniV1ZRuFsadQJn+2HDabjVYXKSiLbZZXK6ysrLC8vGz1Uql0X/8X7aywiyfZzvIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"flow12\"\n        title=\"flow12\"\n        src=\"/static/d50b498933874ddad85e9ad17b51bdd2/7bf07/flow12.png\"\n        srcset=\"/static/d50b498933874ddad85e9ad17b51bdd2/5a46d/flow12.png 300w,\n/static/d50b498933874ddad85e9ad17b51bdd2/0a47e/flow12.png 600w,\n/static/d50b498933874ddad85e9ad17b51bdd2/7bf07/flow12.png 1128w\"\n        sizes=\"(max-width: 1128px) 100vw, 1128px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ol start=\"7\">\n<li>\n<p>콜 스택이 비어있는 것을 확인한 <strong>Event Loop</strong>는 <strong>Microtask Queue</strong>에서 대기하고 있던 <code class=\"language-text\">then()</code>함수를 콜스택에 담는다.</p>\n</li>\n<li>\n<p><code class=\"language-text\">then()</code>함수가 실행되고 <code class=\"language-text\">console.log</code>를 통해 <strong>333</strong>가 실행된다.</p>\n</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1130px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAADN0lEQVQ4y42U629TdRyH+x/4UvAVEk2MkVcIvsLE+EIxCxOEFd+oMdPghpCYaILKJgj4wpci4IWqQbxOguu2mjnabMymZQy6XrbT+2W9nEvbtd1pe8ZoH885dROTkfhLnnxyfufkOd9vfhdLrVYjl8sRj8dJpVJUq1WMuVarRaPepKlqrGgraM0VMws5kUwii5STaS5rNHQqjSYV/VtVrWMplUpIkoQsy2YWi0XCEYFmTWNifpj+v7rotT/Pm44XeGNsN32TXRyd7eboTDeHZ/bw7s0XsU8fxOF5BedNOxY2GLIiU19qMJ0Z5z1hP29NdPH29W76XXt4x7ePD/NWPli0cizbw8nsy8z6X+N28BDu0HhHaLTXbrfNNEZBLLBcqTOTmuar/AkuZAb5Qud8coBz8QE+jx7nrKATPm4+n5cGsZU/YTrg6ggN2b1pCBsVDWfSzuu+Xez7dTv7r+zgJZ0Dwzs7+fsOekZ3Yh15it75XRyJP8efc/aNhaJkVKgym3Fjy5/mYvYUtsJpvpHuQT6jp454hq/zH/O98inu4OR9KtSFjSWNP+JD7PU+xrM/beGZS1vYPfEoPcI2rMEnsIY6HAxt40DwcV6NPsnord/u37K6XEdIhXCG7Tgjo0zFxridduBNjHFNGFnHGR7VGcEVGSMUCfwrXMMUFnShqv5n5ZPZGqccaX6+IVFTaixJBlWK+TJKrkRZrJBJL/6zyndXabfummkK8znqmma8QJPy5tywN4Tl0BWePnsdWcqR1b+RZJGF8AL+oJ/QfAiv17vxPhSVCupSmdXxERrfXYCYQFj/+w3/AguJDIlEgmg0is/nY25uDr/fTzAYxOPxYFE9hxFdfRSn+vTsp+jqJTtro66ucueXb2kOXYZ4mNjiIkIwQDqZMI+pITREhtAgEAh0Kiz8uBXh4sOkLm0l8OUjxGwPkpk6RsMoVa2ymoiZVYcDeluhef28p0kmk6Z0TbhWodvt1lse34x2dRO3PttM9vJDMPQAuatHWJarUFZoVStQUhCjEfMSURRl/dwbl4khT6fTJpFIBIvoHiA9OUjAMUjU9RGFa+8Tn/qBlead9a3U5v+PvwGAS/4F0lRraQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"flow13\"\n        title=\"flow13\"\n        src=\"/static/f65fc180b7be5689d2db5504acd78f6f/d56e1/flow13.png\"\n        srcset=\"/static/f65fc180b7be5689d2db5504acd78f6f/5a46d/flow13.png 300w,\n/static/f65fc180b7be5689d2db5504acd78f6f/0a47e/flow13.png 600w,\n/static/f65fc180b7be5689d2db5504acd78f6f/d56e1/flow13.png 1130w\"\n        sizes=\"(max-width: 1130px) 100vw, 1130px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ol start=\"9\">\n<li>\n<p>콜 스택이 비어있는 것을 확인한 <strong>Event Loop</strong>는 <strong>Animation frames</strong>에서 대기하고 있던 <code class=\"language-text\">cb3()</code>함수를 콜스택에 담는다.</p>\n</li>\n<li>\n<p><code class=\"language-text\">cb3()</code>함수가 실행되고 <code class=\"language-text\">console.log</code>를 통해 <strong>444</strong>가 실행된다.</p>\n</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1130px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAADIUlEQVQ4y32Uy28TVxSHveu6j7+hC5KICNooLVl1WWhaCakLJPoS6aIbUqRKXbKApGlpiUJaAYWEICIeKQHSqkUFVFpip/gxSRy/x44dP8b2eGwnJGN78OPrPNKQSqF39Oncc+/oN7+rOffY6vU6hUKBRCKBJElomkaj3qClPzSBBtZoWaGcX0NOKazJ68/2N2npuc0QSSaTm6yYosFQkNqGxmzwAYOufk78dZSTs/2ctPcz8Hc/X3k+Z8jkGEPCMTM/tfAFfwi/Y2OHkZNzqOUqDxIzfCB08+7Ubg7+sof3pjs5NNvFp/Eejoj7OBLdR5/YwyeRN/ks8RZ3vbcswWazSavVMqMxsrks66sbzK88Zkr5nhvKqB5HuVEY5Xr+DNeyI1yVLK5l9Tw3wnTxLHP+R5agIbY9ZnMSldUa9+O3OeTZy9tXd7F/qo3913fxznS7OT/wUxu9t9vpvdPBYf9r9EV7uLt4a2fBnOlQxbPiYCI3xFhygPHMoMlYatDK04MmRj6eGWCy8C0O/8P/cVjWHSZ0h8IeemfaOTDdxvv2Tj5e7uLDyOtbfCR2cTi0l77lHn5dvPk8wSzqkwpucY6L3m847/qai65TXPKe5nJomMvB/zIRPM2V8AhOv+M5glldUN2wau+pVYPrpRpyskgxvYqSLluknmGsS2lp8y83nupFWTejKShlUKtVc96oa2aMeedJLoso5SKykteRKerzqL4WDAcQYxHcHvfOdZiVy6jrT2gKj6lMXoCQj9C8gMflIhAI4Pf5WFpawuPx4NLX/sXh0I/cjE+wERqjEhlHDY9TDV9ACt9DXVPRzn1H5ccRcM+RkAtkUilKpRLFYpF8Po8oiibRaJR4PI4gCNhWxl5k4cxLiOdfxj38CsLwCyTuHaVSqtKK+NAEp+k64PfjdDrxbbrzer243e4tDDG73a4f+c92tN86iE92oNzZDTOvkv/5S92htr0nkNLdZTIZ052iKMiybDqLRCLEYjET4yM26WYXoSvdPPqhm4WJN0hf6mRx5jgV4xa29K7TsNqNcS1rtdoWRlcyOtV2jHf+AS2w/7SsOpYXAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"flow14\"\n        title=\"flow14\"\n        src=\"/static/661b56230db00722b7bd0676f33456ec/d56e1/flow14.png\"\n        srcset=\"/static/661b56230db00722b7bd0676f33456ec/5a46d/flow14.png 300w,\n/static/661b56230db00722b7bd0676f33456ec/0a47e/flow14.png 600w,\n/static/661b56230db00722b7bd0676f33456ec/d56e1/flow14.png 1130w\"\n        sizes=\"(max-width: 1130px) 100vw, 1130px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ol start=\"11\">\n<li>\n<p>콜 스택이 비어있는 것을 확인한 <strong>Event Loop</strong>는 <strong>Task Queue</strong>에서 대기하고 있던 <code class=\"language-text\">cb1()</code>함수를 콜스택에 담는다.</p>\n</li>\n<li>\n<p>마지막으로 콜 스택에 담긴 <code class=\"language-text\">cb1()</code>함수가 실행되고 <code class=\"language-text\">console.log</code>를 통해 <strong>222</strong>가 실행된다.</p>\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javacript\"><pre class=\"language-javacript\"><code class=\"language-javacript\">// 실행결과\n111\n555\n333\n444\n222</code></pre></div>\n<blockquote>\n<p><strong><a href=\"https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/\">tasks-microtasks-queues-and-schedules/</a></strong></p>\n<p>위 사이트에서 대략적인 플로우를 확인해볼 수 있다.</p>\n</blockquote>\n<hr>\n<h2 id=\"summary\" style=\"position:relative;\"><a href=\"#summary\" aria-label=\"summary permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Summary</h2>\n<p>Queue의 호출순서 우선순위는 <strong>Microtask Queue > Animation Frames > Task Queue</strong> 순이다.</p>\n<span class=\"callout\">\n이러한 동작들은 브라우저마다 호출 순서가 다를 가능성이 있다. Promise의 처리방식이 브라우저 별로 다르기 때문이다.\n</span>\n<span class=\"callout\">\nsetTimeout함수의 경우 `delay` 파라미터를 통해 딜레이를 조절할 수 있다. <br>\n하지만 위와 같은 플로우를 통해 작업이 진행되므로 약간의 오차가 발생한다.\n</span>\n<p>위 플로우를 충분히 이해하고 본다면 가장 눈에 잘들어오는 아키텍처는 아래와 같다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd2aZIw//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQABBQJf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGhAAAgMBAQAAAAAAAAAAAAAAAAERQYEQMf/aAAgBAQABPyGhuLjDRed//9oADAMBAAIAAwAAABBTz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB0QAQACAgIDAAAAAAAAAAAAAAEAIRFBEFExcZH/2gAIAQEAAT8Qw9t7mPdqXbLEtp8J5vbwh0T/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"libuv\"\n        title=\"libuv\"\n        src=\"/static/45427dcce42d7cfd5d1e12c45003839f/e5166/libuv.jpg\"\n        srcset=\"/static/45427dcce42d7cfd5d1e12c45003839f/f93b5/libuv.jpg 300w,\n/static/45427dcce42d7cfd5d1e12c45003839f/b4294/libuv.jpg 600w,\n/static/45427dcce42d7cfd5d1e12c45003839f/e5166/libuv.jpg 1200w,\n/static/45427dcce42d7cfd5d1e12c45003839f/b6e58/libuv.jpg 1430w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<hr>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li>\n<p><a href=\"https://nodejs.org/en/docs/guides/event-loop-timers-and-nexttick/#what-is-the-event-loop\">Node.js Doc: EventLoop</a></p>\n</li>\n<li>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop\">MDN: EventLoop</a></p>\n</li>\n<li>\n<p><a href=\"https://asfirstalways.tistory.com/362\">[JS] Javascript의 Event Loop</a></p>\n</li>\n<li>\n<p><a href=\"https://iamsjy17.github.io/javascript/2019/07/20/how-to-works-js.html\">[Javascript] 자바스크립트의 호출 스택과 이벤트 루프</a></p>\n</li>\n<li>\n<p><a href=\"https://sjh836.tistory.com/149\">nodejs의 내부 동작 원리 (libuv, 이벤트루프, 워커쓰레드, 비동기)</a></p>\n</li>\n</ul>","fields":{"slug":"/node-js/about_node_js_2/"},"frontmatter":{"title":"Node.js의 이벤트 루프와 비동기","series_num":2,"date":"Oct 08. 2020","tags":["Node.js","Javascript","V8","EventLoop"]},"headings":[{"value":"이벤트 루프","depth":2,"id":"이벤트-루프"},{"value":"구조","depth":3,"id":"구조"},{"value":"동작 원리 - callback","depth":3,"id":"동작-원리---callback"},{"value":"동작 원리 - promise","depth":3,"id":"동작-원리---promise"},{"value":"Summary","depth":2,"id":"summary"},{"value":"Reference","depth":2,"id":"reference"}]},"related":{"nodes":[{"fields":{"slug":"/node-js/about_node_js_1/"},"frontmatter":{"title":"Node.js의 구조","date":"Oct 06. 2020"}},{"fields":{"slug":"/node-js/about_node_js_5/"},"frontmatter":{"title":"Node.js의 I/O 동작","date":"Oct 21. 2020"}},{"fields":{"slug":"/node-js/about_node_js_3/"},"frontmatter":{"title":"비동기와 논블로킹","date":"Oct 12. 2020"}},{"fields":{"slug":"/node-js/about_node_js_package_top10/"},"frontmatter":{"title":"2020 TOP 10 Node.js Package & Framework","date":"Oct 12. 2020"}},{"fields":{"slug":"/node-js/solving_promise_bottleneck/"},"frontmatter":{"title":"async/await 병목현상 줄여보기","date":"Sep 21. 2020"}},{"fields":{"slug":"/node-js/about_node_js_4/"},"frontmatter":{"title":"Node.js의 스레드","date":"Oct 13. 2020"}}]}},"pageContext":{"id":"7e97ab3d-3da9-5b1f-baf9-d59388617512","slug":"/node-js/about_node_js_2/","series_name":"Node.js 파헤치기","category":"Node.js","previous":{"fields":{"slug":"/node-js/about_node_js_1/"},"frontmatter":{"title":"Node.js의 구조"}},"next":{"fields":{"slug":"/node-js/about_node_js_package_top10/"},"frontmatter":{"title":"2020 TOP 10 Node.js Package & Framework"}}}},"staticQueryHashes":["1069093791","1381152472","1821008744","278901532","3528274121"]}