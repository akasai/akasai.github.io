{"componentChunkName":"component---src-template-post-tsx","path":"/typescript/about_typescript_4_1/","result":{"data":{"site":{"siteMetadata":{"comment":{"utterances":"akasai/akasai.github.io"}}},"post":{"id":"1bb0cfbf-a0d2-5db3-889a-5682e710d483","excerpt":"11월 19일 Typescript 4.1이 릴리즈되었다. 한달이 지난 시점이지만, 대략적인 내용을 정리해 보았다. Template Literal Types String literal types…","timeToRead":5,"html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 832px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAED/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAQF/9oADAMBAAIQAxAAAAHCl2fAf//EABYQAAMAAAAAAAAAAAAAAAAAAAAQIf/aAAgBAQABBQIi/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQAGPwJ//8QAGhAAAgIDAAAAAAAAAAAAAAAAAREAECFRof/aAAgBAQABPyEJ55Do3X//2gAMAwEAAgADAAAAEPQf/8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQMBAT8Qp//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAECAQE/EIf/xAAbEAABBAMAAAAAAAAAAAAAAAARAAEQIVFxkf/aAAgBAQABPxDMjpUvrER//9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"typescript\"\n        title=\"typescript\"\n        src=\"/static/4a85a073f61d6e9d1c8a3e8e7b9df94d/c2601/typescript.jpg\"\n        srcset=\"/static/4a85a073f61d6e9d1c8a3e8e7b9df94d/f93b5/typescript.jpg 300w,\n/static/4a85a073f61d6e9d1c8a3e8e7b9df94d/b4294/typescript.jpg 600w,\n/static/4a85a073f61d6e9d1c8a3e8e7b9df94d/c2601/typescript.jpg 832w\"\n        sizes=\"(max-width: 832px) 100vw, 832px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>11월 19일 Typescript 4.1이 릴리즈되었다.</p>\n<p>한달이 지난 시점이지만, 대략적인 내용을 정리해 보았다.</p>\n<hr>\n<h2 id=\"template-literal-types\" style=\"position:relative;\"><a href=\"#template-literal-types\" aria-label=\"template literal types permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Template Literal Types</h2>\n<h3 id=\"string-literal-types\" style=\"position:relative;\"><a href=\"#string-literal-types\" aria-label=\"string literal types permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>String literal types</h3>\n<p><code class=\"language-text\">Typescript</code>에서는 문자열 나열형태의 타입을 지원한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">function</span> <span class=\"token function\">setVerticalAlignment</span><span class=\"token punctuation\">(</span>pos<span class=\"token operator\">:</span> <span class=\"token string\">\"top\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"middle\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"bottom\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">setVerticalAlignment</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"middel\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// error: Argument of type '\"middel\"' is not assignable to parameter of type '\"top\" | \"middle\" | \"bottom\"'.</span></code></pre></div>\n<p>위 처럼 활용하면 파라미터의 <strong>스펠체크</strong>가 가능한 형태의 타입이였다.</p>\n<p>이를 활용해서 좀 더 다양한 타입정의를 할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">Options</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">[</span><span class=\"token constant\">K</span> <span class=\"token keyword\">in</span> <span class=\"token string\">\"noImplicitAny\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"strictNullChecks\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"strictFunctionTypes\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// same as</span>\n<span class=\"token comment\">//   type Options = {</span>\n<span class=\"token comment\">//       noImplicitAny?: boolean,</span>\n<span class=\"token comment\">//       strictNullChecks?: boolean,</span>\n<span class=\"token comment\">//       strictFunctionTypes?: boolean</span>\n<span class=\"token comment\">//   }</span></code></pre></div>\n<h3 id=\"template-literal-string-type\" style=\"position:relative;\"><a href=\"#template-literal-string-type\" aria-label=\"template literal string type permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Template literal string type</h3>\n<p><code class=\"language-text\">Javascript</code>의 <strong>템플릿 스트링</strong>을 활용하여 <code class=\"language-text\">TS4.1</code>에서는 좀 더 다양한 타입을 선언할 수 있게 되었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">World</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"world\"</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Greeting</span> <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">hello </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>World<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n<span class=\"token comment\">// same as</span>\n<span class=\"token comment\">//   type Greeting = \"hello world\"</span></code></pre></div>\n<p>이를 응용하면 길게만 느껴진 나열형태의 타입선언이 아주 간단하게 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">VerticalAlignment</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"top\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"middle\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"bottom\"</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">HorizontalAlignment</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"left\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"center\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"right\"</span>\n\n<span class=\"token keyword\">declare</span> <span class=\"token keyword\">function</span> <span class=\"token function\">setAlignment</span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>VerticalAlignment<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>HorizontalAlignment<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span>\n<span class=\"token comment\">//   | \"top-left\"    | \"top-center\"    | \"top-right\"</span>\n<span class=\"token comment\">//   | \"middle-left\" | \"middle-center\" | \"middle-right\"</span>\n<span class=\"token comment\">//   | \"bottom-left\" | \"bottom-center\" | \"bottom-right\"</span>\n\n<span class=\"token function\">setAlignment</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"top-left\"</span><span class=\"token punctuation\">)</span>   <span class=\"token comment\">// works!</span>\n<span class=\"token function\">setAlignment</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"top-middel\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// error!</span></code></pre></div>\n<p>총 9가지의 타입이 단 두개의 타입과 <strong>템플릿 스트링</strong>을 활용하여 간단하게 선언가능하다.</p>\n<h3 id=\"dynamically-template-literal-type\" style=\"position:relative;\"><a href=\"#dynamically-template-literal-type\" aria-label=\"dynamically template literal type permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Dynamically template literal type</h3>\n<p>지금까지 알아본 내용들을 이용하면 다양한 형태의 선언이 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">PropEventSource<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token generic-function\"><span class=\"token function\">on</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">K</span> <span class=\"token keyword\">extends</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">&amp;</span> <span class=\"token keyword\">keyof</span> <span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span>\n        <span class=\"token punctuation\">(</span>eventName<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">K</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">Changed</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token function-variable function\">callback</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>newValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token constant\">K</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">declare</span> <span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">makeWatchedObject</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">&amp;</span> PropEventSource<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> person <span class=\"token operator\">=</span> <span class=\"token function\">makeWatchedObject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  firstName<span class=\"token operator\">:</span> <span class=\"token string\">'John'</span><span class=\"token punctuation\">,</span>\n  age<span class=\"token operator\">:</span> <span class=\"token number\">42</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">makeWatchedObject()</code>함수는 <code class=\"language-text\">obj</code> 파라미터의 타입 <strong>T</strong>를 동적으로 할당한다.</p>\n<p><strong>person</strong> 이라는 익명함수를 정의할 때 위와같이 <code class=\"language-text\">obj</code>를 정의하면 프로퍼티들의 타입을 바탕으로 한 제너릭 타입 <strong>T</strong>가</p>\n<p>정의된다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 424px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 112.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAABYlAAAWJQFJUiTwAAADfklEQVQ4y4VUa3eaQBTMD2mjPMJrBQQUkJdIEBQfSWzTnp62//9nTO/dapo09vTDPQvozs7dmbk3pvDhZmt4eQ8xryCSBlayhusHeHh4wHrd0fqI58/PWJYl+q7Dcb/H6eGIw+Eof7+/b7FarVDS7ze6pkNXVSijEdI4Rr2sUOYZ/fmAx8cn7Hd7ZFmGkaLBntcw/ARmVMGar+ShyljB+FyqquHm7s6AYZjQafU8H0mSYrHIkOcFnbzGutsgL0pYwoOIMtj+TK7TfI1ZnIIJ8X7G4brR6AMj396OUNcr/Pj5Ew3RV+9sTMoD/O4bvOYzwrJH4PvEaEwgKjRlTPtUCaLrd38AXdfFfB4jCEJitsByuYQQE0TRDKYtYFGZlgPTtGHbDm2mjczozOo1mAQMwwhd16NtW3nJbbuG4wh5yO3HW1l8P9yapvCqQVNV+azR8zuG/MIt86Y4TohhTSLkGIYdTqdP2JEoZVnBIJZusoITZpjENdy0gR9E8qA3DF9EIeDJxCXQGGm6kCAdWWLTb1DkuQR0ovy3KLMSfrEhURYvLN+IwsUMmd337z+kp3RTwMkHeO1XuKsTIhIlnE6lTX6LQi2rV1rm+2JB+IUtU5A5mSmL4HghVQTLDWA5E9j03/+KwmA9tcXizGZzKIoqLTSi+vjhg6wxmZ7FUMkq+kWQf4ly+cBt8901zT0KMvJut8ORIrfZDmdRhBRF0D2yKFz+NKS9V0S5gE5cT7Lk1vke98OA3bCVUdQNi0QpSJS5zPy0Gq6LwkBcLEpFzL48f6EhUEHRTFhxC1E9QhR7BHmLKYWAMy9TQonRzpZ50zK7n4WxTAsRDYFmu0FAKbHDkNrK4S6WmOQ1RDiDSyrrtk0JIk+6/ovd3jDkFtnIPXlOW8RQqgzGsYcxtNDbCvpyAaOv4Rw6WE0Bo86R7jcY+l4G4jWYBORTjPPLnMBZkLQo0FAUW4pkTSIt6ECTbCNmBZwgobvMiHEGz5++F+VCme9jOg2QkiA5AWw3WzyfnvBEg3RVFnK88fBlIDdtEayOiNP8uij8wPS5dZ7OGc1DRbdgzujuyj1EvoWfUn6FIC9SUtTzkLgmiklicDFgkiRyGCQ0JHh0TeIKHg0BMV/CDRP41KIEeTVQ34nCY2pD7THoJSW8SrPLRIzPuVWvMnoHyECWZb98eD3Or9XfAH/XL3AgqZu1MOVmAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"enum1\"\n        title=\"enum1\"\n        src=\"/static/f614de6395b2952ee2d321172ba2bb6b/1cfa9/enum1.png\"\n        srcset=\"/static/f614de6395b2952ee2d321172ba2bb6b/5a46d/enum1.png 300w,\n/static/f614de6395b2952ee2d321172ba2bb6b/1cfa9/enum1.png 424w\"\n        sizes=\"(max-width: 424px) 100vw, 424px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>이제 <code class=\"language-text\">PropEventSource</code> type을 바탕으로 <code class=\"language-text\">on</code>함수를 호출해 볼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// Error! </span>\nperson<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"lastNameChanged\"</span><span class=\"token punctuation\">,</span> _ <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// works! 'newName' is typed as 'string'</span>\nperson<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"firstNameChanged\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>newName<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 'newName' has the type of 'firstName'</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">new name is </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>newName<span class=\"token punctuation\">.</span><span class=\"token function\">toUpperCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// works! 'newAge' is typed as 'number'</span>\nperson<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ageChanged\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>newAge<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>newAge <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"warning! negative age\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>위 예제에선 <strong>lastNameChanged, firstNameChanged, ageChanged</strong> 등 3개의 eventName을 받는다.</p>\n<p><code class=\"language-text\">on()</code>함수의 파라미터는 <code class=\"language-text\">${K}Changed</code>라는 템플릿 스트링 타입이며 <strong>K</strong>는 제너릭 타입 <code class=\"language-text\">K extends string &amp; keyof T</code>과 같다.</p>\n<p>즉, eventName의 타입은 <code class=\"language-text\">makeWatchedObject()</code>의 파라미터의 프로퍼티를 바탕으로 정의되므로 **‘firstNameChanged’ | ‘ageChanged’**이다.</p>\n<p>따라서 첫번째 예제는 <strong>Error</strong>이다.</p>\n<br>\n<p>두번째 예제에서는 <strong>K</strong>가 <strong>firstName</strong>이 된다.</p>\n<p><code class=\"language-text\">PropEventSource</code>에서 선언된 내용에 따라 <code class=\"language-text\">on()</code>함수의 콜백 파라미터는 <code class=\"language-text\">T[K]</code>가 된다.</p>\n<p>여기서 <code class=\"language-text\">T[K]</code>는 **‘John’**이므로 자연스럽게(?) newName은 <strong>string</strong>타입으로 정의된다.</p>\n<br>\n<p>세번째 예제에서 <strong>K</strong>는 <strong>age</strong>d이며 <code class=\"language-text\">on()</code>함수의 콜백 파라미터는 <code class=\"language-text\">T[K]</code>는 <strong>25</strong>이므로</p>\n<p>newAge는 <strong>number</strong>타입으로 정의된다.</p>\n<hr>\n<h2 id=\"key-remapping-in-mapped-types\" style=\"position:relative;\"><a href=\"#key-remapping-in-mapped-types\" aria-label=\"key remapping in mapped types permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Key Remapping in Mapped Types</h2>\n<p><code class=\"language-text\">as</code> 키워드를 이용해 좀 더 명확한 **매핑타입(Mapping Type)**을 선언할 수 있게 되었다.</p>\n<p>기존에 주로사용되던 <strong>매핑타입</strong>은 대표적으로 optional 프로퍼티를 만드는 <code class=\"language-text\">Partial</code>이 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">Partial<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">[</span><span class=\"token constant\">K</span> <span class=\"token keyword\">in</span> <span class=\"token keyword\">keyof</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">]</span><span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token constant\">K</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">TS4.1</code>에서는 위 구문에 <code class=\"language-text\">as</code> 키워드를 사용하여 좀 더 정교한 타입정의가 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">Getters<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">[</span><span class=\"token constant\">K</span> <span class=\"token keyword\">in</span> <span class=\"token keyword\">keyof</span> <span class=\"token constant\">T</span> <span class=\"token keyword\">as</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">get</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>Capitalize<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span> <span class=\"token operator\">&amp;</span> <span class=\"token constant\">K</span><span class=\"token operator\">></span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token constant\">K</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Person</span> <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n    age<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n    location<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">LazyPerson</span> <span class=\"token operator\">=</span> Getters<span class=\"token operator\">&lt;</span>Person<span class=\"token operator\">></span>\n\n<span class=\"token keyword\">const</span> person<span class=\"token operator\">:</span> LazyPerson <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">getName</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">'John'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">getAge</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token number\">25</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">getLocation</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">'seoul'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 예제에서 <code class=\"language-text\">Getters</code>타입은 제너릭 <strong>T</strong>의 key값들을 이용하여 <code class=\"language-text\">get${K}</code>형태의 익명함수로 구성된 타입이다.</p>\n<p>interface <code class=\"language-text\">Person</code>을 제너릭타입으로 하는 <code class=\"language-text\">LazyPerson</code>타입을 통해</p>\n<p>각 키값을 바탕으로 <strong>getName | getAge | getLocation</strong>이라는 익명함수를 갖는 <strong>person</strong>변수를 선언할 수 있다.</p>\n<hr>\n<h2 id=\"etc\" style=\"position:relative;\"><a href=\"#etc\" aria-label=\"etc permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ETC</h2>\n<p>이 외에도 다양한 변경점이 존재한다.</p>\n<ol>\n<li>\n<p><code class=\"language-text\">abstract</code> Members Can’t Be Marked <strong>async</strong></p>\n<p>추상 멤버는 더 이상 <strong>async</strong> 키워드를 기입하지 않아도 된다.</p>\n</li>\n<li>\n<p><code class=\"language-text\">any/unknown</code> Are Propagated in <strong>Falsy</strong> Positions</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">declare</span> <span class=\"token keyword\">let</span> foo<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span>\n<span class=\"token keyword\">declare</span> <span class=\"token keyword\">let</span> somethingElse<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> someProp<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> x <span class=\"token operator\">=</span> foo <span class=\"token operator\">&amp;&amp;</span> somethingElse</code></pre></div>\n<p>기존에는 <code class=\"language-text\">any/unknown</code> 타입은 <strong>false</strong>로 판단되어 위 예제에서 <strong>x</strong>는 <code class=\"language-text\">somethingElse</code>으로 정의된다.</p>\n<p>하지만 <code class=\"language-text\">TS4.1</code>에서는 더 이상 <strong>false</strong>로 판단되지 않으므로 <code class=\"language-text\">unknown</code>타입으로 정의된다.</p>\n<p>그러므로 <code class=\"language-text\">any/unknown</code>타입을 <strong>boolean</strong>값으로 활용하려면 <code class=\"language-text\">!!foo &amp;&amp; someExpression</code>와 같이 정해야한다.</p>\n</li>\n<li>\n<p>resolve‘s Parameters Are No Longer <strong>Optional</strong> in Promises</p>\n<p><code class=\"language-text\">Promise</code>함수에서 <code class=\"language-text\">resolve()</code>함수의 인자값이 <strong>Required</strong>로 변경된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">number</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//     ^^^^^^^^</span>\n    <span class=\"token function\">doSomethingAsync</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n       <span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n       <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span>\n       <span class=\"token comment\">//      ^^^^^</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>만약 아무 인자값이 없다면 <strong>void</strong>타입으로 정의해야한다.</p>\n</li>\n<li>\n<p>The new type aliases <code class=\"language-text\">Uppercase</code>, <code class=\"language-text\">Lowercase</code>, <code class=\"language-text\">Capitalize</code> and <code class=\"language-text\">Uncapitalize</code></p>\n<p>새로운 내장 앨리어스타입이 추가되었다.</p>\n<p>명칭 그대로 대문자, 소문자와 관련된 타입들이다.</p>\n</li>\n</ol>\n<hr>\n<h2 id=\"summary\" style=\"position:relative;\"><a href=\"#summary\" aria-label=\"summary permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Summary</h2>\n<p><code class=\"language-text\">Typescript</code>는 버전마다 다양한 기능들이 추가된다.</p>\n<p>사실 딥하게 사용하지 않는다면 크게 와닿는 기능들은 몇개되지 않는다.</p>\n<p>하지만 내용을 알고 있다면 분명 응용할 수 있는 부분들이 생길 것이라고 생각한다.</p>\n<p>특히 <code class=\"language-text\">Template literal type</code>은 상당히 인상깊었고 꼭 한번 활용해보려고 한다.</p>\n<p>더 많은 내용들이 컬럼에 정리되어 있으니 관심있다면 정독해보는 것도 좋을 것 같다.</p>\n<hr>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li><a href=\"https://devblogs.microsoft.com/typescript/announcing-typescript-4-1/\">Announcing TypeScript 4.1</a></li>\n</ul>","fields":{"slug":"/typescript/about_typescript_4_1/"},"frontmatter":{"title":"Typescript 4.1","series_num":0,"date":"Dec 12. 2020","tags":["Typescript"]},"headings":[{"value":"Template Literal Types","depth":2,"id":"template-literal-types"},{"value":"String literal types","depth":3,"id":"string-literal-types"},{"value":"Template literal string type","depth":3,"id":"template-literal-string-type"},{"value":"Dynamically template literal type","depth":3,"id":"dynamically-template-literal-type"},{"value":"Key Remapping in Mapped Types","depth":2,"id":"key-remapping-in-mapped-types"},{"value":"ETC","depth":2,"id":"etc"},{"value":"Summary","depth":2,"id":"summary"},{"value":"Reference","depth":2,"id":"reference"}]},"related":{"nodes":[{"fields":{"slug":"/typescript/about_enum/"},"frontmatter":{"title":"Enum","date":"Oct 28. 2020"}},{"fields":{"slug":"/typescript/about_closure/"},"frontmatter":{"title":"Closure와 Private","date":"Oct 24. 2020"}},{"fields":{"slug":"/typescript/typescript_solid_1/"},"frontmatter":{"title":"solid하게 SOLID (1)","date":"Sep 18. 2020"}},{"fields":{"slug":"/typescript/typescript_solid_2/"},"frontmatter":{"title":"solid하게 SOLID (2)","date":"Sep 19. 2020"}}]}},"pageContext":{"id":"1bb0cfbf-a0d2-5db3-889a-5682e710d483","slug":"/typescript/about_typescript_4_1/","series_name":"","category":"Typescript","previous":{"fields":{"slug":"/etc/kakao_2020/"},"frontmatter":{"title":"[컨퍼런스] if(kakao) 2020"}},"next":{"fields":{"slug":"/basic/about_concurrency_and_parallelism/"},"frontmatter":{"title":"동시성과 병렬성"}}}},"staticQueryHashes":["1069093791","1381152472","1821008744","278901532","3528274121"]}